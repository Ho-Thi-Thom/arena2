<link
  rel="stylesheet"
  href="{{ 'main-collection.css' | asset_url }}"
  media="all"
>

{% liquid
  assign products = collection.products
  assign productsSize = products.size
  assign collectionTitle = collection.title
  assign collectionDescription = collection.description
%}

<script>
  console.log({{ products | json }});
</script>
{% liquid

%}
<div class="section_container container_wrapper">
  {% comment %}
    ------------------------
    COLLECTION TOP
    ------------------------
  {% endcomment %}
  <div class="collection__header">
    <div class="collection__header-content">
      {% render 'collection-content',
        title: collectionTitle,
        description: collectionDescription,
        productCount: productsSize
      %}
    </div>
    <div class="collection__header-content">
      {% render 'collection-image', image: collection.image %}
    </div>
  </div>

  <div class="collection__toolbar">
    {% if true %}
      <button class="collection__toolbar-filter-btn">
        <span class="collection__toolbar-filter-icon">{% render 'icon-close' %}</span>
        Filter
      </button>
    {% endif %}
    <div class="collection__toolbar-sort">
      {% assign sort_by = collection.sort_by | default: collection.default_sort_by %}
      {% render 'collection-sort',
        label: 'Sort by',
        options: collection.sort_options,
        collection_url: collection.url,
        _id: 'sort_by',
        _name: 'sortby',
        _form: 'selectform',
        _sort_by: sort_by
      %}
    </div>
  </div>

  {% if true %}
    <div class="collection__toolbar__filter">
      {% render 'collection-filter' %}
    </div>
  {% endif %}

  {% comment %} Sidebar {% endcomment %}
  {% comment %} {% render 'collection-filter', flexDirection: 'coloumn' %} {% endcomment %}

  <div class="collection__hr"></div>
  {%- comment -%}
    -------------------------------
    RENDER PRODUCT
    -------------------------------
  {%- endcomment -%}

  <div class="collection__products">
    {% for product in products %}
      {% render 'collection-product', product: product %}
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Collection",
  "settings": []
}
{% endschema %}
{{ 'collection.js' | asset_url | script_tag }}
{{ 'filter.js' | asset_url | script_tag }}
