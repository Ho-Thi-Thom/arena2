(()=>{var y=document.querySelector("#infinity_point"),H=document.querySelector("#sort_by"),M=document.querySelector("#show"),N=document.querySelectorAll(".filter-form"),I=document.querySelectorAll(".paginate_link[data-url]"),{loading:v,createUrl:m,hiddenLoading:C,getApi:P,appendProduct:E,setProduct:L,updateCount:T,updatePointInfinity:A,updatePaginate:b}=w();if(y){let e=new IntersectionObserver(o=>{o.forEach(i=>{if(i.isIntersecting){let a=function(l){l.set("section_id",s)};var u=a;let c=i.target,d=c.dataset.url,s=c.dataset.sectionId,r=m(a,d.split("?")[1]);v(c),P(r).then(l=>{let p=l.getPointInfinity();E(l.getElementProduct()),A(p),p.dataset.url||e.disconnect()}).finally(()=>{C(c)})}})});e.observe(y)}S(I);function S(e){e&&e.forEach(o=>{o.addEventListener("click",i=>{let u=i.target,c=u.dataset.url,d=u.dataset.sectionId;function s(r){r.set("section_id",d)}let a=m(s,c.split("?")[1]);P(a).then(r=>{L(r.getElementProduct()),b(r.getPaginate())})})})}function w(){let e=document.querySelector("#collection__products"),o=document.querySelector(".product_count"),i=document.querySelector("#infinity_point"),u=document.querySelector(".paginate");function c(t){t.innerHTML="Loading..."}function d(t){t.innerHTML=""}function s(t,n){let f=new URLSearchParams(n);return t(f),window.location.pathname+"?"+f.toString()}function a(t,n,f){return fetch(t,n).then(g=>f?.(g)??g.text()).then(g=>q(g))}function r(t){t.querySelectorAll("#collection__products > *")?.forEach(n=>{e?.appendChild(n)})}function l(t){e&&(e.parentNode.replaceChild(t,e),e=document.querySelector("#collection__products"))}function p(t){o&&(o.parentNode.replaceChild(t,o),o=document.querySelector(".product_count"))}function _(t){i&&i.setAttribute("data-url",t.dataset.url)}function h(t){u&&(u.parentNode.replaceChild(t,u),u=document.querySelector(".paginate"),S(document.querySelectorAll(".paginate_link[data-url]")))}function q(t){let n=document.createElement("div");return n.innerHTML=t,{getElementProduct(){return n.querySelector("#collection__products")},getProductCount(){return n.querySelector(".product_count")},getPointInfinity(){return n.querySelector("#infinity_point")},getPaginate(){return n.querySelector(".paginate")}}}return{loading:c,hiddenLoading:d,getApi:a,appendProduct:r,setProduct:l,updateCount:p,updatePointInfinity:_,createUrl:s,updatePaginate:h}}})();
