(()=>{var _=document.querySelector("#infinity_point"),E=document.querySelector("#sort_by"),q=document.querySelector("#show"),v=document.querySelectorAll(".filter-form"),I=document.querySelectorAll(".paginate_link[data-url]"),{loading:k,createUrl:m,hiddenLoading:C,getApi:f,appendProduct:A,setProduct:y,updateCount:T,updatePointInfinity:P,updatePaginate:S}=U();if(_){let i=new IntersectionObserver(u=>{u.forEach(t=>{if(t.isIntersecting){let o=function(l){l.set("section_id",n)};var a=o;let e=t.target,r=e.dataset.url,n=e.dataset.sectionId,d=m(o,r.split("?")[1]);k(e),f(d).then(l=>{let p=l.getPointInfinity();A(l.getElementProduct()),P(p),p.dataset.url||i.disconnect()}).finally(()=>{C(e)})}})});i.observe(_)}E&&E.addEventListener("change",i=>{let u=i.target.value,t=i.target.dataset.sectionId;function a(r){r.set("section_id",t),r.set("sort_by",u)}let e=m(a);history.pushState(null,null,e),f(e).then(r=>{y(r.getElementProduct())})});q&&q.addEventListener("change",i=>{let u=i.target.value,t=i.target.dataset.sectionId,a=`${window.Shopify.routes.root}cart/update.js`,e={attributes:{items_per_page:u},sections:[t]},r={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}};function n(o){return o.json().then(d=>d.sections[t])}f(a,r,n).then(o=>{y(o.getElementProduct()),P(o.getPointInfinity()),S(o.getPaginate())})});v&&v.forEach(i=>{i.addEventListener("submit",a=>{a.preventDefault();let e="",r=new FormData(a.target);for(let[n,o]of r)e+=`&${n}=${o}`;e=e.replace("&","?"),f(e).then(n=>{y(n.getElementProduct()),T(n.getProductCount()),P(n.getPointInfinity()),S(n.getPaginate())})});let u=document.querySelectorAll('input[type="checkbox"]'),t={};u.forEach(a=>{a.addEventListener("change",function(){this.checked?(t[this.name]||(t[this.name]=[]),t[this.name].push(this.value)):t[this.name]&&(t[this.name]=t[this.name].filter(n=>n!==this.value));let e=new URLSearchParams;Object.keys(t).forEach(n=>{t[n].forEach(o=>{e.append(n,o)})});let r=window.location.pathname+"?"+e.toString();console.log(r),history.pushState(null,null,r)})})});I&&I.forEach(i=>{i.addEventListener("click",u=>{let t=u.target,a=t.dataset.url,e=t.dataset.sectionId;function r(o){o.set("section_id",e)}let n=m(r,a.split("?")[1]);f(n).then(o=>{y(o.getElementProduct()),S(o.getPaginate())})})});function U(){let i=document.querySelector("#collection__products"),u=document.querySelector(".product_count"),t=document.querySelector("#infinity_point"),a=document.querySelector(".paginate");function e(c){c.innerHTML="Loading..."}function r(c){c.innerHTML=""}function n(c,s){let g=new URLSearchParams(s);return c(g),window.location.pathname+"?"+g.toString()}function o(c,s,g){return fetch(c,s).then(h=>g?.(h)??h.text()).then(h=>w(h))}function d(c){c.querySelectorAll("#collection__products > *")?.forEach(s=>{i?.appendChild(s)})}function l(c){i&&(i.parentNode.replaceChild(c,i),i=document.querySelector("#collection__products"))}function p(c){u&&(u.parentNode.replaceChild(c,u),u=document.querySelector(".product_count"))}function b(c){t&&t.setAttribute("data-url",c.dataset.url)}function L(c){a&&(a.parentNode.replaceChild(c,a),a=document.querySelector(".paginate"))}function w(c){let s=document.createElement("div");return s.innerHTML=c,{getElementProduct(){return s.querySelector("#collection__products")},getProductCount(){return s.querySelector(".product_count")},getPointInfinity(){return s.querySelector("#infinity_point")},getPaginate(){return s.querySelector(".paginate")}}}return{loading:e,hiddenLoading:r,getApi:o,appendProduct:d,setProduct:l,updateCount:p,updatePointInfinity:b,createUrl:n,updatePaginate:L}}})();
