(()=>{var E=document.querySelector("#infinity_point"),I=document.querySelector("#sort_by"),b=document.querySelector("#show"),v=document.querySelectorAll('input[type="checkbox"]'),j=document.querySelectorAll(".paginate_link[data-url]"),{loading:k,createUrl:P,hiddenLoading:F,getApi:y,appendProduct:N,setProduct:S,updateCount:O,updatePointInfinity:_,updatePaginate:w,createUrlFilter:R}=x();if(E){let e=new IntersectionObserver(c=>{c.forEach(i=>{if(i.isIntersecting){let d=function(u){u.set("section_id",n)};var o=d;let r=i.target,a=r.dataset.url,n=r.dataset.sectionId,p=P(d,a.split("?")[1]);k(r),y(p).then(u=>{let f=u.getPointInfinity();N(u.getElementProduct()),_(f),f.dataset.url||e.disconnect()}).finally(()=>{F(r)})}})});e.observe(E)}I&&I.addEventListener("change",e=>{let c=e.target.value,i=e.target.dataset.sectionId;function o(a){a.set("sort_by",c)}let r=P(o,window.location.href.split("?")[1]);history.pushState(null,null,r),y(r).then(a=>{S(a.getElementProduct())})});b&&b.addEventListener("change",e=>{let c=e.target.value,i=e.target.dataset.sectionId,o=`${window.Shopify.routes.root}cart/update.js`,r={attributes:{items_per_page:c},sections:[i]},a={method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}};function n(u){return u.json().then(f=>f.sections[i])}function d(u){u.set("items_per_page",c)}let p=P(d,window.location.href.split("?")[1]);history.pushState(null,null,p),y(o,a,n).then(u=>{S(u.getElementProduct()),_(u.getPointInfinity()),w(u.getPaginate())})});v&&v.forEach(e=>{e.addEventListener("change",c=>{let i=c.target.value,o=c.target.name;function r(n){c.target.checked?(n[o]||(n[o]=[]),n[o].push(i)):n[o]&&(n[o]=n[o].filter(d=>d!==i))}let a=R(r,window.location.search);history.pushState(null,null,a),y(a).then(n=>{S(n.getElementProduct()),O(n.getProductCount()),_(n.getPointInfinity()),w(n.getPaginate())})})});L(j);function L(e){e&&e.forEach(c=>{c.addEventListener("click",i=>{let o=i.target,r=o.dataset.url,a=o.dataset.sectionId;function n(p){p.set("section_id",a)}let d=P(n,r.split("?")[1]);y(d).then(p=>{S(p.getElementProduct()),w(p.getPaginate())})})})}function x(){let e=document.querySelector("#collection__products"),c=document.querySelector(".product_count"),i=document.querySelector("#infinity_point"),o=document.querySelector(".paginate");function r(t){t.innerHTML="Loading..."}function a(t){t.innerHTML=""}function n(t,l){let g=new URLSearchParams(l);return t(g),window.location.pathname+"?"+g.toString()}function d(t,l){let g=new URLSearchParams(l),s={};g.forEach(function(m,h){s[h]||(s[h]=[]),s[h].push(m)}),t(s);let q=new URLSearchParams;return Object.keys(s).forEach(m=>{s[m].forEach(h=>{q.append(m,h)})}),`${window.location.pathname}?${q.toString()}`}function p(t,l,g){return fetch(t,l).then(s=>g?.(s)??s.text()).then(s=>T(s))}function u(t){t.querySelectorAll("#collection__products > *")?.forEach(l=>{e?.appendChild(l)})}function f(t){e&&(e.parentNode.replaceChild(t,e),e=document.querySelector("#collection__products"))}function C(t){c&&(c.parentNode.replaceChild(t,c),c=document.querySelector(".product_count"))}function U(t){i&&i.setAttribute("data-url",t.dataset.url)}function A(t){o&&(o.parentNode.replaceChild(t,o),o=document.querySelector(".paginate"),L(document.querySelectorAll(".paginate_link[data-url]")))}function T(t){let l=document.createElement("div");return l.innerHTML=t,{getElementProduct(){return l.querySelector("#collection__products")},getProductCount(){return l.querySelector(".product_count")},getPointInfinity(){return l.querySelector("#infinity_point")},getPaginate(){return l.querySelector(".paginate")}}}return{loading:r,hiddenLoading:a,getApi:p,appendProduct:u,setProduct:f,updateCount:C,updatePointInfinity:U,createUrl:n,updatePaginate:A,createUrlFilter:d}}})();
